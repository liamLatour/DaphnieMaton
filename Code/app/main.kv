#:kivy 1.10.1
#:import _ assets.libraries.localization._

<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: 'vertical'
        FileChooserListView:
            id: filechooser
            path: root.path
        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: _('Cancel')
                on_release: root.cancel()
            Button:
                text: _('Load')
                on_release: root.load(filechooser.path, filechooser.selection)

<SaveDialog>:
    text_input: text_input
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: 'vertical'
        FileChooserListView:
            id: filechooser
            on_selection: text_input.text = self.selection and self.selection[0] or ''
            path: root.path

        TextInput:
            id: text_input
            size_hint_y: None
            height: 30
            multiline: False
        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: _('Cancel')
                on_release: root.cancel()
            Button:
                text: _('Save')
                on_release: root.save(filechooser.path, text_input.text)

<PenDropDown>:
    Button:
        text: _('No port')
        height: 48
        size_hint_y : None

<Input>:
    size_hint: (1, None)
    size: (200, 30)
    orientation: 'horizontal'

<Parametrage>:
    id: parametrage
    orientation:'vertical'
    ActionBar:
        pos_hint: {'top':1}
        ActionView:
            use_separator: True
            ActionPrevious:
                title: _('DaphnieMaton')
                with_previous: False
                app_icon: '..\Images\kivyLogo.ico'
            ActionButton:
                text: _('Save')
                on_release: root.show_save()
            ActionButton:
                text: _('Open')
                on_release: root.show_load()
            ActionButton:
                id: port_button
                text: _('Port')
                on_release: root.show_port()
            ActionButton:
                text: _('Option')
                on_release: app.open_settings()
            ActionButton:
                text: _('Help')
                on_release: root.help()

    TabbedPanel:
        do_default_tab: False
        id: tabbedPanel
        TabbedPanelItem:
            text: _('Pipe')
            name: 'Tuyeau'
            id: changeTab
            BoxLayout:
                BoxLayout:
                    ScrollView:
                        size_hint: (1, 1)
                        BoxLayout:
                            id: tuyeauInputs
                            orientation: 'vertical'
                            spacing: 5
                            size_hint_y: None
                            height: self.minimum_height
                            Input:
                                id: nbPipe
                                inputName: _('Number of pipes')
                                input_filter: 'int'
                                default_text: '0' 
                                callback: lambda *args: root.tuyeauGap()
                            Input:
                                id: lenPipe
                                inputName: _('Pipe lenght (m)')
                                input_filter: 'float'
                                default_text: '0' 
                                callback: lambda *args: root.update_rect()
                            Input:
                                id: timePipe
                                inputName: _('Time for one pipe (sec)')
                                input_filter: 'float'
                                default_text: '0' 
                                callback: lambda *args: root.update_rect()
                            Input:
                                id: photoPipe
                                inputName: _('Centimeter per picture')
                                input_filter: 'float'
                                default_text: '0' 
                                callback: lambda *args: root.update_rect()
                            Input:
                                id: distOriginX
                                inputName: _('Distance from origin X')
                                input_filter: 'float'
                                default_text: '0'
                                callback: lambda *args: root.update_rect()
                            Input:
                                id: distOriginY
                                inputName: _('Distance from origin Y')
                                input_filter: 'float'
                                default_text: '0' 
                                callback: lambda *args: root.update_rect()
                            Input:
                                id: sameGap
                                inputName: _('Constant gap')
                                inputType: 1
                                default_text: 'False' 
                                callback: lambda *args: root.tuyeauGap()
                Splitter:
                    sizable_from: 'left'
                    strip_size: '5pt'
                    id: pipeSplitter
                    BoxLayout:
                        orientation: 'vertical'
                        Widget:
                            id: pipeDrawing
                            canvas.before:
                        BoxLayout:
                            size_hint: (1, None)
                            size: (200, 50)
                            spacing: 10
                            orientation: 'horizontal'
                            Button:
                                text: _('Upload')
                                on_release: root.update()
                            Button:
                                text: _('Copy to Free mode')
                                on_release: root.generatePathFromPipe(True)
        TabbedPanelItem:
            text: _('Free')
            name: 'Libre'
            BoxLayout:
                BoxLayout:
                    ScrollView:
                        size_hint: (1, 1)
                        BoxLayout:
                            id: libreInputs
                            orientation: 'vertical'
                            spacing: 5
                            size_hint_y: None
                            height: self.minimum_height
                            Input:
                                id: loop
                                inputName: _('Loop')
                                inputType: 1
                                default_text: 'False'
                                callback: lambda *args: root.update_rect()
                            Input:
                                id: coord
                                inputName: _('Coordinates')
                                default_text: '0 : 0'
                                callback: lambda *args: root.inputMove()
                Splitter:
                    sizable_from: 'left'
                    strip_size: '5pt'
                    id: libreSplitter
                    BoxLayout:
                        orientation: 'vertical'
                        Widget:
                            id: libreDrawing
                            on_touch_down: root.clickedDown(args[1])
                            on_touch_up: root.clickedUp(args[1])
                            on_touch_move: root.clickedMove(args[1])
                            canvas.before:
                        BoxLayout:
                            size_hint: (1, None)
                            size: (200, 50)
                            spacing: 10
                            orientation: 'horizontal'
                            Button:
                                text: _('Upload')
                                on_release: root.update()
        TabbedPanelItem:
            text: _('Direct')
            name: 'Direct'
            BoxLayout:
                id: directSplitter
                BoxLayout:
                    orientation: 'vertical'
                    Widget:
                        id: directDrawing
                        canvas.before:
                    BoxLayout:
                        size_hint: (1, None)
                        size: (200, 50)
                        spacing: 10
                        orientation: 'horizontal'
                        Button:
                            text: _('Upload')
                            on_release: root.update()